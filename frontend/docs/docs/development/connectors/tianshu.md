# å¤©æ¢è¿æ¥å™¨

å¤©æ¢æ˜¯ä¸€æ¬¾ä¸“æ³¨äºä¸­æ–‡æ–‡æ¡£çš„è§£æå¼•æ“ï¼Œé’ˆå¯¹ä¸­æ–‡ç‰ˆé¢å’Œæ’ç‰ˆç‰¹ç‚¹è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ï¼Œé€‚åˆå¤„ç†ä¼ä¸šå†…éƒ¨çš„ä¸­æ–‡æ–‡æ¡£èµ„æ–™ã€‚

## åŠŸèƒ½ç‰¹æ€§

- âœ… ä¸­æ–‡ç‰ˆé¢æ·±åº¦ä¼˜åŒ–
- âœ… æ”¯æŒç«–æ’æ–‡å­—è¯†åˆ«
- âœ… å¤ç±ã€ç¹ä½“æ–‡æ¡£æ”¯æŒ
- âœ… å°ç« ã€æ°´å°æ™ºèƒ½è¿‡æ»¤
- âœ… è¡¨æ ¼ç»“æ„ç²¾å‡†è¿˜åŸ
- âœ… æ”¯æŒ GPU åŠ é€Ÿ

## éƒ¨ç½²æ–¹å¼

### Docker Compose éƒ¨ç½²ï¼ˆæ¨èï¼‰

åˆ›å»º `docker-compose.yml`ï¼š

```yaml
version: '3.8'
services:
  tianshu:
    image: ghcr.io/magicyuan876/mineru-tianshu:latest
    ports:
      - "5002:5002"
    volumes:
      - ./data:/app/data
    environment:
      - WORKERS=2
    restart: unless-stopped
    # GPU æ”¯æŒ
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]
```

å¯åŠ¨æœåŠ¡ï¼š

```bash
docker compose up -d
```

## é…ç½®è¿æ¥å™¨

1. è¿›å…¥ **è®¾ç½®** â†’ **æ–‡æ¡£è§£æ**
2. ç‚¹å‡» **æ·»åŠ è§£æå™¨**
3. å¡«å†™é…ç½®ï¼š
   - **åç§°**ï¼š`å¤©æ¢è§£æå™¨`
   - **ç±»å‹**ï¼šé€‰æ‹© `å¤©æ¢`
   - **API ç«¯ç‚¹**ï¼š`http://localhost:5002`
4. ç‚¹å‡» **æµ‹è¯•è¿æ¥**
5. å¯ç”¨å¹¶ä¿å­˜

## API æ¥å£è¯´æ˜

```bash
# è§£ææ–‡æ¡£
curl -X POST http://localhost:5002/parse \
  -F "file=@document.pdf" \
  -H "Content-Type: multipart/form-data"
```

### è§£æé€‰é¡¹

```json
{
  "ocr_mode": "accurate",
  "remove_watermark": true,
  "table_extraction": true,
  "vertical_text": true
}
```

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `ocr_mode` | OCR æ¨¡å¼ï¼ˆfast/accurateï¼‰ | `accurate` |
| `remove_watermark` | ç§»é™¤æ°´å°å¹²æ‰° | `false` |
| `table_extraction` | å¯ç”¨è¡¨æ ¼æå– | `true` |
| `vertical_text` | å¯ç”¨ç«–æ’æ–‡å­—è¯†åˆ« | `false` |

## é€‚ç”¨åœºæ™¯

å¤©æ¢ç‰¹åˆ«é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š

- ğŸ¢ **ä¼ä¸šæ–‡æ¡£**ï¼šåˆåŒã€å…¬å‘Šã€ä¼šè®®çºªè¦
- ğŸ“œ **å†å²æ¡£æ¡ˆ**ï¼šè€æ—§æ‰«æä»¶ã€ä¼ çœŸä»¶
- ğŸ“‘ **æ”¿åŠ¡æ–‡ä»¶**ï¼šå…¬æ–‡ã€è¡¨å•ã€è¯ç…§
- ğŸ“š **ä¸­æ–‡ä¹¦ç±**ï¼šç”µå­ä¹¦ã€æ•™æã€æœŸåˆŠ

## ä¸å…¶ä»–è§£æå™¨å¯¹æ¯”

| ç‰¹æ€§ | å¤©æ¢ | MinerU | Docling |
|------|------|--------|---------|
| ä¸­æ–‡ä¼˜åŒ– | â­â­â­ | â­â­ | â­ |
| ç«–æ’æ–‡å­— | âœ… | âŒ | âŒ |
| æ°´å°å¤„ç† | âœ… | âŒ | âŒ |
| éƒ¨ç½²éš¾åº¦ | ç®€å• | ä¸­ç­‰ | ç®€å• |
| èµ„æºå ç”¨ | ä¸­ç­‰ | è¾ƒé«˜ | è¾ƒä½ |

## æ€§èƒ½è°ƒä¼˜

### Worker é…ç½®

æ ¹æ®æœåŠ¡å™¨ CPU æ ¸å¿ƒæ•°è°ƒæ•´ï¼š

```yaml
environment:
  - WORKERS=4  # å»ºè®®è®¾ç½®ä¸º CPU æ ¸å¿ƒæ•°
```

### å†…å­˜ä¼˜åŒ–

å¤„ç†å¤§å‹æ–‡æ¡£æ—¶å¢åŠ å†…å­˜é™åˆ¶ï¼š

```yaml
deploy:
  resources:
    limits:
      memory: 8G
```

## å¸¸è§é—®é¢˜

### Q: ç«–æ’æ–‡å­—è¯†åˆ«ä¸å‡†ç¡®ï¼Ÿ

ç¡®ä¿å¯ç”¨ç«–æ’è¯†åˆ«é€‰é¡¹ï¼š
```json
{"vertical_text": true}
```

### Q: æ°´å°å½±å“è¯†åˆ«æ•ˆæœï¼Ÿ

å¼€å¯æ°´å°è¿‡æ»¤ï¼š
```json
{"remove_watermark": true}
```

### Q: æ‰«æä»¶è¯†åˆ«ç‡ä½ï¼Ÿ

å»ºè®®ï¼š
- ä½¿ç”¨ `accurate` OCR æ¨¡å¼
- ç¡®ä¿æ‰«æåˆ†è¾¨ç‡ â‰¥ 200 DPI
- è°ƒæ•´å›¾ç‰‡å¯¹æ¯”åº¦å’Œäº®åº¦

## ç›¸å…³é“¾æ¥

- [å¤©æ¢ GitHub](https://github.com/magicyuan876/mineru-tianshu)
